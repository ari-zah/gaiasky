{"version":1,"ops":[{"type":4,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1580803655,"metadata":{"gitlab-id":"281963258"},"status":1},{"type":3,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1580804023,"metadata":{"gitlab-id":"281966369"},"message":"This appears to be a crash with the memory profiling module for AMD GPUs. I have added a few safety checks to prevent crashing. \n\nFind the patched file [here](http://gaia.ari.uni-heidelberg.de/gaiasky/files/temp/326/gaiasky-core.jar). Put it in `$GAIASKY_INSTALL_FOLDER/lib`, overwriting the current one, and try to run Gaia Sky again. If it works, the patch will make it into the next release.","files":null},{"type":3,"author":{"id":"09b1fdd5dfbd03af415c64c08f37e65581572a54"},"timestamp":1581025593,"metadata":{"gitlab-id":"283888535"},"message":"sorry, remains unchanged\n\n[gaiasky_crash_20200206-224237.txt](/uploads/4c1be1e84f996671ee8e43fb7f4a7130/gaiasky_crash_20200206-224237.txt)","files":null},{"type":3,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1581063105,"metadata":{"gitlab-id":"284049246"},"message":"Can you also attach the `gaiasky_log_20200206-224237.txt`?","files":null},{"type":3,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1581064120,"metadata":{"gitlab-id":"284063865"},"message":"Ok, I manually reproduced the error and fixed the handling with proper testing. Same link: [gaiasky-core.jar](http://gaia.ari.uni-heidelberg.de/gaiasky/files/temp/326/gaiasky-core.jar).\n\nHowever, I'm a bit intrigued by the part of your log file that points to your GPU not being recognized (see below). Let's hope that is a by-product of the crash.\n\n``` bash\n[...]\n\n## GL INFORMATION\nGraphcis device: null\nGL vendor: null\nGL version: null\nGLSL version: null\nGL extensions: \nGL max texture size: 0\n```","files":null},{"type":3,"author":{"id":"09b1fdd5dfbd03af415c64c08f37e65581572a54"},"timestamp":1581099057,"metadata":{"gitlab-id":"284468102"},"message":"i am so sorry, but does not work either.. thanx a lot for tryin'\n[gaiasky_crash_20200207-190742.txt](/uploads/5399f8cbb91cdd6ae9e891d1b2a66fe3/gaiasky_crash_20200207-190742.txt)[gaiasky_log_20200207-190742.txt](/uploads/50a04b7afee48cac78f39ecc25d648e9/gaiasky_log_20200207-190742.txt)","files":null},{"type":3,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1581325982,"metadata":{"gitlab-id":"285169847"},"message":"Could you make sure that the file `lwjgl-opengl-3.2.3.jar` is in the `lib/` folder in your Gaia Sky install location?\n\nCould you paste the results of \n``` bash \n$  ls -la $GAIASKY_INSTALL/lib\n```\nNote that `$GAIASKY_INSTALL` may not be defined. Also, do \n``` bash\n$  sha256sum $GAIASKY_INSTALL/lib/lwjgl-*\n```\nand paste it here.","files":null},{"type":3,"author":{"id":"09b1fdd5dfbd03af415c64c08f37e65581572a54"},"timestamp":1581453366,"metadata":{"gitlab-id":"286524042"},"message":"Ok, i will check tomorrow, when i am back home on that device again ..","files":null},{"type":3,"author":{"id":"09b1fdd5dfbd03af415c64c08f37e65581572a54"},"timestamp":1581539737,"metadata":{"gitlab-id":"287232414"},"message":"`GAIASKY_INSTALL='which gaiasky'`\n\n``` bash\n$  ls -la $GAIASKY_INSTALL/lib\nls: Zugriff auf '/usr/bin/gaiasky/lib' nicht möglich: Ist kein Verzeichnis\n```\n``` bash\n$  ll /usr/bin/gaiasky\nlrwxrwxrwx 1 root root 20  7. Nov 14:34 /usr/bin/gaiasky -\u003e /opt/gaiasky/gaiasky\n```\n``` bash\n$  ll -h /opt/gaiasky/lib/lw*\n-rw-r--r-- 1 root root 541K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-3.2.3.jar\n-rw-r--r-- 1 root root  74K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-3.2.3-natives-linux.jar\n-rw-r--r-- 1 root root  39K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-3.2.3-natives-macos.jar\n-rw-r--r-- 1 root root 133K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-3.2.3-natives-windows.jar\n-rw-r--r-- 1 root root 106K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-glfw-3.2.3.jar\n-rw-r--r-- 1 root root 156K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-glfw-3.2.3-natives-linux.jar\n```\n...\n``` bash\n$  sha256sum /opt/gaiasky/lib/lwjgl-*\nf9928c3b4b540643a1bbd59286d3c7175e470849261a0c29a81389f52265ad8b  /opt/gaiasky/lib/lwjgl-3.2.3.jar\n002810129fc6ac4cdfcdf190e18a643a5021b6300f489c1026bbc5d00140ca2e  /opt/gaiasky/lib/lwjgl-3.2.3-natives-linux.jar\n5c520c465a84034b8bc23e1d7ecd621bb99c437cd254ea46b53197448d1b8128  /opt/gaiasky/lib/lwjgl-3.2.3-natives-macos.jar\nbdf519b9aa90f799954113a15dfa84b273ee4781876b3ecdebf192ce4f88a26c  /opt/gaiasky/lib/lwjgl-3.2.3-natives-windows.jar\nef279cdaeede4ca344e756a56f85a85cbd039f7931011975672dc1b900b59c8f  /opt/gaiasky/lib/lwjgl-glfw-3.2.3.jar\n```\n...\n``` bash\n$  sudo pacman -Qi gaiasky\nName                     : gaiasky\nVersion                  : 1:2.2.4_1.a169540c8-2\nBeschreibung             : Interactive 3D Universe software focused on ESA's Gaia mission\nArchitektur              : x86_64\nURL                      : https://zah.uni-heidelberg.de/gaia/outreach/gaiasky\nLizenzen                 : MPL\nGruppen                  : Nichts\nStellt bereit            : Nichts\nHängt ab von             : jre11-openjdk  xorg-xrandr\nOptionale Abhängigkeiten : Nichts\nBenötigt von             : Nichts\nOptional für             : Nichts\nIn Konflikt mit          : Nichts\nErsetzt                  : Nichts\nInstallationsgröße       : 44,59 MiB\nPacker                   : Unknown Packager\nErstellt am              : Mo 03 Feb 2020 21:44:17 CET\nInstalliert am           : Mo 03 Feb 2020 21:44:29 CET\nInstallationsgrund       : Ausdrücklich installiert\nInstallations-Skript     : Ja\nVerifiziert durch        : Nichts\n```\n\nIt seems, java expects the libs in /usr/bin/gaiasky/lib but the installer placed them in /opt/gaiasky/lib/\n\nmaybe\n\n**Edit:** formatting","files":null},{"type":3,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1581605677,"metadata":{"gitlab-id":"287719474"},"message":"So, you don't have any `lwjgl-openal*.jar` or `lwjgl-opengl*.jar` in the `lib/` folder, or did you just omit them? If they are indeed not there, that would be consistent with the original log error.","files":null},{"type":3,"author":{"id":"09b1fdd5dfbd03af415c64c08f37e65581572a54"},"timestamp":1581610966,"metadata":{"gitlab-id":"287822858"},"message":"No, these files are all there ..\n\n```\nll -h /opt/gaiasky/lib/lw*\n-rw-r--r-- 1 root root 541K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-3.2.3.jar\n-rw-r--r-- 1 root root  74K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-3.2.3-natives-linux.jar\n-rw-r--r-- 1 root root  39K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-3.2.3-natives-macos.jar\n-rw-r--r-- 1 root root 133K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-3.2.3-natives-windows.jar\n-rw-r--r-- 1 root root 106K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-glfw-3.2.3.jar\n-rw-r--r-- 1 root root 156K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-glfw-3.2.3-natives-linux.jar\n-rw-r--r-- 1 root root  65K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-glfw-3.2.3-natives-macos.jar\n-rw-r--r-- 1 root root 137K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-glfw-3.2.3-natives-windows.jar\n-rw-r--r-- 1 root root  34K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-jemalloc-3.2.3.jar\n-rw-r--r-- 1 root root 156K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-jemalloc-3.2.3-natives-linux.jar\n-rw-r--r-- 1 root root 116K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-jemalloc-3.2.3-natives-macos.jar\n-rw-r--r-- 1 root root 122K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-jemalloc-3.2.3-natives-windows.jar\n-rw-r--r-- 1 root root  78K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-openal-3.2.3.jar\n-rw-r--r-- 1 root root 578K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-openal-3.2.3-natives-linux.jar\n-rw-r--r-- 1 root root 517K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-openal-3.2.3-natives-macos.jar\n-rw-r--r-- 1 root root 634K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-openal-3.2.3-natives-windows.jar\n-rw-r--r-- 1 root root 915K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-opengl-3.2.3.jar\n-rw-r--r-- 1 root root  77K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-opengl-3.2.3-natives-linux.jar\n-rw-r--r-- 1 root root  40K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-opengl-3.2.3-natives-macos.jar\n-rw-r--r-- 1 root root  89K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-opengl-3.2.3-natives-windows.jar\n-rw-r--r-- 1 root root 412K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-openvr-3.2.3.jar\n-rw-r--r-- 1 root root 123K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-openvr-3.2.3-natives-linux.jar\n-rw-r--r-- 1 root root  91K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-openvr-3.2.3-natives-macos.jar\n-rw-r--r-- 1 root root 342K  3. Feb 21:44 /opt/gaiasky/lib/lwjgl-openvr-3.2.3-natives-windows.jar\n```\n\n\n\nI think java expects the jars in /usr/bin/gaiasky/lib/ and does not try /opt/gaiasky/lib/\n\nSo what should i do ?","files":null},{"type":3,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1581665846,"metadata":{"gitlab-id":"288141379"},"message":"\u003e  I think java expects the jars in /usr/bin/gaiasky/lib/ and does not try /opt/gaiasky/lib/\n\nNo, the jars are in the right place. `/usr/bin/gaiasky` is only the launcher script, no program files should ever go into `/usr/bin`. I don't have an AMD GPU, so I can't reproduce or debug this. Maybe it's a bug in lwjgl...","files":null},{"type":3,"author":{"id":"09b1fdd5dfbd03af415c64c08f37e65581572a54"},"timestamp":1581762616,"metadata":{"gitlab-id":"288740144"},"message":"i posted in the lwjgl forum and got this  answer:\n\n*Hey,\nthis is most likely not an issue with LWJGL but with the library's gaiasky.util.VMemInfo.ATIVRAM. Despite the class using Windows-specific functionality (WGL), it seems to be used when running on an unix-based OS based on your crash report.\nThe application should check which OS it's currently running on and which extensions are supported before using WGLAMDGPUAssociation (or GLXAMDGPUAssociation).*\n\n\nhttp://forum.lwjgl.org/index.php?topic=6999.msg36690#msg36690","files":null},{"type":3,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1581789446,"metadata":{"gitlab-id":"288784563"},"message":"Right, I'll have a look. Since I don't have an AMD GPU that code was never tested. Ironically, I don't ever use Windows either, and apparently the snippet I used to get AMG GPU information is Windows-only.","files":null},{"type":3,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1581928397,"metadata":{"gitlab-id":"289206355"},"message":"Let's try again, this time with proper extension checking. Without `WGL_AMD_gpu_association` I can't figure out the total VRAM, so you will only see the free video memory, if it works. Same link: [gaiasky-core.jar](http://gaia.ari.uni-heidelberg.de/gaiasky/files/temp/326/gaiasky-core.jar)","files":null},{"type":3,"author":{"id":"09b1fdd5dfbd03af415c64c08f37e65581572a54"},"timestamp":1581976058,"metadata":{"gitlab-id":"289735716"},"message":"Great Job! The application started :+1: :smile: \n\nWhat you mean with \"..can't figure out the total VRAM, so you will only see the free video memory\" ?\n\nWhere do i check for free/used VRAM ?\n\nThere are also some kind of graphical artifacts/distortions that i could not get rid of - see screenshot.\n![gaiasky](/uploads/8704c36f09cb0116db23b3624304001d/gaiasky.png)\nBut i can search the forum for that - thanx a lot!!","files":null},{"type":3,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1582018204,"metadata":{"gitlab-id":"289958657"},"message":"\u003e Where do i check for free/used VRAM ?\n\nYou can press `Ctrl`+`d` to bring up the debug information (top right). Initially only the FPS and time frame are shown, but you can expand it by clicking on the small `(+)` to see additional information. Also, you can enable 'Show debug info' in the preferences window, System tab. You may also want to disable the minimap (`TAB`), because it's located at the same position.\n\n\u003e There are also some kind of graphical artifacts/distortions that i could not get rid of - see screenshot.\n\nInteresting. Good that you are testing Gaia Sky with an ATI card. This looks like unorthodox values being set in the render buffer by one (or more) of the post-processing shaders, as it affects the whole scene equally, and the UI is unaffected. You could try disabling each of the post-processors one by one: \n\n* Anti-aliasing — set to 'No anti-aliasing'\n* Bloom — set to 0\n* Lens flare — uncheck\n* Star glow — uncheck\n* Motion blur — uncheck\n* HDR tone mapping — set to 'None'\n\nIf the glitches persist after disabling all of them, then we may need look at the Image levels post-processor (always on, controls brightness, contrast, hue, etc.) or even dig dipper. This might be related to the use of a 16-bit floating-point backbuffer instead of the regular 8-bit RGBA.","files":null},{"type":3,"author":{"id":"09b1fdd5dfbd03af415c64c08f37e65581572a54"},"timestamp":1582048607,"metadata":{"gitlab-id":"290466098"},"message":"I have run several test with all options off and then step by step turning them on again. What i can say by now: the distortions appear as soon as i activate the \"Star glow\" feature.. without that, it looks fine:\n\n![gaiasky_wo_starglow](/uploads/9a881c826b88ff8ea427b371a599b659/gaiasky_wo_starglow.png)\n\nAs far as i can tell from the VRAM info - it allocates 4096 MB VRAM - but the Sapphire Card is a 8GB GDDR5 model..\n\nIf i can test something else AMD-card related just let me know!\n\nThanks!","files":null},{"type":3,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1582053337,"metadata":{"gitlab-id":"290508446"},"message":"Great! It may actually have something to do with the color clamping. Try with this one:  [gaiasky-core.jar](http://gaia.ari.uni-heidelberg.de/gaiasky/files/temp/326/gaiasky-core.jar)","files":null},{"type":3,"author":{"id":"09b1fdd5dfbd03af415c64c08f37e65581572a54"},"timestamp":1582056632,"metadata":{"gitlab-id":"290535410"},"message":"i think you got the wrong jar for this change (old version) - this version crashed again on startup ..","files":null},{"type":3,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1582097412,"metadata":{"gitlab-id":"290710284"},"message":"Oh, sorry, forgot to apply the VRAM patch. There you go: [gaiasky-core.jar](http://gaia.ari.uni-heidelberg.de/gaiasky/files/temp/326/gaiasky-core.jar)","files":null},{"type":3,"author":{"id":"09b1fdd5dfbd03af415c64c08f37e65581572a54"},"timestamp":1582140517,"metadata":{"gitlab-id":"291199043"},"message":"it got now worse with star glow on:\n![gaiasky_starglow](/uploads/2391c6654463cd131c429b4754f231d6/gaiasky_starglow.png)\n\n.. and turned off again:\n![gaiasky_starglow_off](/uploads/a1f19b72527fa91acdef4431ea629b23/gaiasky_starglow_off.png)","files":null},{"type":3,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1582184378,"metadata":{"gitlab-id":"291417532"},"message":"It will be hella difficult to narrow this down without access to the hardware. Is there any shader compilation warning in the logs?","files":null},{"type":3,"author":{"id":"09b1fdd5dfbd03af415c64c08f37e65581572a54"},"timestamp":1582188763,"metadata":{"gitlab-id":"291455929"},"message":"No, i did not see any warning:\n[2020-02-20T08-50-30.409114Z_gaiasky.log](/uploads/76eb0608a7fbf85e8cd3a8920474f141/2020-02-20T08-50-30.409114Z_gaiasky.log)","files":null},{"type":5,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1580804034,"metadata":{"gitlab-id":"37304508"},"added":["bug"],"removed":[]}]}