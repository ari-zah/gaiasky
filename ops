{"version":1,"ops":[{"type":1,"author":{"id":"09b1fdd5dfbd03af415c64c08f37e65581572a54"},"timestamp":1580801905,"metadata":{"gitlab-base-url":"https://gitlab.com/","gitlab-id":"326","gitlab-project-id":"6581209","gitlab-url":"https://gitlab.com/langurmonkey/gaiasky/-/issues/326","origin":"gitlab"},"title":"Crash on startup: arcolinux, gaiasky Version 2.2+, java-13-openjdk, amdgpu-pro-libgl","message":"as from gaia crash report, it seems that the graphics/opengl is not detected, but when i run glxgears it runs with ~ 22000 frames/5sec ..\n\ni tried java-11-openjdk but i got the same crash as result..\n\n``` bash\n#\n# GAIA SKY CRASH REPORT\n# Mon Feb 03 23:26:43 CET 2020\n\n## STACK TRACE\ncom.badlogic.gdx.utils.GdxRuntimeException: java.lang.NoClassDefFoundError: Could not initialize class org.lwjgl.opengl.WGL$Functions\n        at com.badlogic.gdx.backends.lwjgl3.Lwjgl3Application.\u003cinit\u003e(Lwjgl3Application.java:117)\n        at gaiasky.desktop.GaiaSkyDesktop.launchMainApp(GaiaSkyDesktop.java:339)\n        at gaiasky.desktop.GaiaSkyDesktop.init(GaiaSkyDesktop.java:273)\n        at gaiasky.desktop.GaiaSkyDesktop.main(GaiaSkyDesktop.java:260)\nCaused by: java.lang.NoClassDefFoundError: Could not initialize class org.lwjgl.opengl.WGL$Functions\n        at org.lwjgl.opengl.WGL.wglGetCurrentDC(WGL.java:173)\n        at org.lwjgl.opengl.GL.createCapabilitiesWGLDummy(GL.java:474)\n        at org.lwjgl.opengl.GL.getCapabilitiesWGL(GL.java:275)\n        at org.lwjgl.opengl.WGLAMDGPUAssociation.nwglGetGPUIDsAMD(WGLAMDGPUAssociation.java:65)\n        at gaiasky.util.VMemInfo$ATIVRAM.computeTotalMemory(VMemInfo.java:103)\n        at gaiasky.util.VMemInfo$ATIVRAM.\u003cinit\u003e(VMemInfo.java:93)\n        at gaiasky.util.VMemInfo.initialize(VMemInfo.java:21)\n        at gaiasky.util.VMemInfo.getUsedMemory(VMemInfo.java:44)\n        at gaiasky.GaiaSky$1.run(GaiaSky.java:586)\n        at com.badlogic.gdx.backends.lwjgl3.Lwjgl3Application.loop(Lwjgl3Application.java:153)\n        at com.badlogic.gdx.backends.lwjgl3.Lwjgl3Application.\u003cinit\u003e(Lwjgl3Application.java:111)\n        ... 3 more\n\n\n## GAIA SKY INFORMATION\nVersion: 2.2.4-1\nBuild: a169540c8\nBuilder: tsagrista\nSystem: Linux hidalgo 5.3.18-050318-generic x86_64\nBuild time: 2020-01-23T08:55:00Z\n\n## JAVA INFORMATION\nJava version: 13.0.2\nJava runtime name: OpenJDK Runtime Environment\nJava VM name: OpenJDK 64-Bit Server VM\nJava VM version: 13.0.2+8\nJava VM vendor: Oracle Corporation\n\n## SYSTEM INFORMATION\nCPU: Intel(R) Core(TM) i7-3770K CPU @ 3.50GHz\nCPU arch: 64-bit\nAvailable processors (cores): 8\nFree memory (bytes): 931897344\nMaximum memory (bytes): 4294967296\nTotal memory available to JVM (bytes): 2232418304\nFile system root: /\nTotal space (bytes): 235443040256\nFree space (bytes): 119080783872\nUsable space (bytes): 107049545728\n\n## OS INFORMATION\nOS name: Linux\nOS version: 5.5.1-arch1-1\nOS architecture: amd64\n\n## GL INFORMATION\nGraphcis device: null\nGL vendor: null\nGL version: null\nGLSL version: null\nGL extensions: \nGL max texture size: 0\n~\n```\n\n\n\n\n``` bash\n\u003ezgrep CONFIG_DRM_AMDGPU_ /proc/config.gz \nCONFIG_DRM_AMDGPU_SI=y\nCONFIG_DRM_AMDGPU_CIK=y\nCONFIG_DRM_AMDGPU_USERPTR=y\n# CONFIG_DRM_AMDGPU_GART_DEBUGFS is not set\n```\n\n\n\n``` bash\n\u003elspci -k | grep -EA3 'VGA|3D|Display'\n00:02.0 Display controller: Intel Corporation Xeon E3-1200 v2/3rd Gen Core processor Graphics Controller (rev 09)\n        Subsystem: ASRock Incorporation Motherboard\n        Kernel driver in use: i915\n        Kernel modules: i915\n--\n01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Ellesmere [Radeon RX 470/480/570/570X/580/580X/590] (rev e7)\n        Subsystem: Sapphire Technology Limited Radeon RX 570 Pulse 4GB\n        Kernel driver in use: amdgpu\n        Kernel modules: amdgpu\n```\n\n\n\n\n``` bash\n\u003eegrep -i \" connected|card detect|primary dev|Setting driver\" /var/log/Xorg.0.log\n[     9.521] (II) intel(G0): Using Kernel Mode Setting driver: i915, version 1.6.0 20191101\n[     9.930] (II) AMDGPU(0): Output HDMI-A-4 connected\n```\n\n\n\n\n\n``` bash\n\u003einxi -F\nGraphics:  Device-1: Intel Xeon E3-1200 v2/3rd Gen Core processor Graphics driver: i915 \n           v: kernel \n           Device-2: AMD Ellesmere [Radeon RX 470/480/570/570X/580/580X/590] \n           driver: amdgpu v: kernel \n           Display: x11 server: X.Org 1.20.7 driver: amdgpu,ati,intel \n           unloaded: fbdev,modesetting,vesa resolution: 1920x1080~60Hz \n           OpenGL: renderer: Radeon RX 580 Series v: 4.6.13572 Core Profile Context\n```\n\n\n\n\n\n``` bash\n\u003eglxinfo -B\nname of display: :0\ndisplay: :0  screen: 0\ndirect rendering: Yes\nMemory info (GL_ATI_meminfo):\n    VBO free memory - total: 7592 MB, largest block: 6117 MB\n    VBO free aux. memory - total: 5846 MB, largest block: 4412 MB\n    Texture free memory - total: 7592 MB, largest block: 6117 MB\n    Texture free aux. memory - total: 5846 MB, largest block: 4412 MB\n    Renderbuffer free memory - total: 7592 MB, largest block: 6117 MB\n    Renderbuffer free aux. memory - total: 5846 MB, largest block: 4412 MB\nOpenGL vendor string: Advanced Micro Devices, Inc.\nOpenGL renderer string: Radeon RX 580 Series\nOpenGL core profile version string: 4.6.13572 Core Profile Context\nOpenGL core profile shading language version string: 4.60\nOpenGL core profile context flags: (none)\nOpenGL core profile profile mask: core profile\n\nOpenGL version string: 4.6.13572 Compatibility Profile Context\nOpenGL shading language version string: 4.60\nOpenGL context flags: (none)\nOpenGL profile mask: compatibility profile\n\nOpenGL ES profile version string: 4.6.13572 Compatibility Profile Context\nOpenGL ES profile shading language version string: 4.60\n```\n\nEDIT: format","files":null}]}