{"version":1,"ops":[{"type":1,"author":{"id":"96b0ca7cd30bb493310f134fed311141138b4461"},"timestamp":1513699194,"metadata":{"gitlab-base-url":"https://gitlab.com/","gitlab-id":"233","gitlab-project-id":"6581209","gitlab-url":"https://gitlab.com/langurmonkey/gaiasky/-/issues/233","origin":"gitlab"},"title":"Cannot build desktop:dist","message":"*Created by: vga101*\n\nHi,\nwith the most recent commit, I have problems of building and running Gaia Sky via `./gradlew desktop:dist` - see below. Running via `./gradlew desktop:run` works, however. \n\n```\n$ git describe\n1.5.0-239-gfe97f02\n$ ./gradlew desktop:dist\nConfiguration on demand is an incubating feature.\n\n\u003e Configure project :\n\nBUILD INFO FROM GIT\n===================\ngit tag: 1.5.0\ngit rev: fe97f02\nbuildtime: Tue Dec 19 16:44:47 CET 2017\nbuilder: me\nsystem: Linux host 3.13.0-77-generic x86_64\n\n\nBUILD VARIABLES AND INFO\n========================\nbase dir: .../gaiasky\ntag.rev: 1.5.0.fe97f02\ndist name: gaiasky-1.5.0.fe97f02\ndist dir: .../gaiasky/releases/gaiasky-1.5.0.fe97f02\npackages name: packages-1.5.0.fe97f02\npackages dir: .../gaiasky/releases/packages-1.5.0.fe97f02\n\nCreating desktop jar file\nCreating core jar file\nNDK is missing a \"platforms\" directory.\nIf you are using NDK, verify the ndk.dir is set to a valid NDK directory.  It is currently set to /home/tsagrista/Programs/android/ndk-bundle.\nIf you are not using NDK, unset the NDK variable from ANDROID_NDK_HOME or local.properties to remove this warning.\n\nBUILD SUCCESSFUL in 1s\n9 actionable tasks: 6 executed, 3 up-to-date\n\n$ releases/gaiasky-1.5.0.fe97f02/gaiasky   \n/usr/lib/jvm/java-8-oracle/bin/java  -Xms2g -Xmx3g -XX:+UseConcMarkSweepGC -cp \"/lhome/vgaibler/prog/solsys-explorer/gaiasky/releases/gaiasky-1.5.0.fe97f02/lib/*\" gaia.cu9.ari.gaiaorbit.desktop.GaiaSkyDesktop \njava.io.FileNotFoundException: data/dummyversion (Datei oder Verzeichnis nicht gefunden)\n        at java.io.FileInputStream.open0(Native Method)\n        at java.io.FileInputStream.open(FileInputStream.java:195)\n        at java.io.FileInputStream.\u003cinit\u003e(FileInputStream.java:138)\n        at java.io.FileInputStream.\u003cinit\u003e(FileInputStream.java:93)\n        at gaia.cu9.ari.gaiaorbit.desktop.util.DesktopConfInit.\u003cinit\u003e(DesktopConfInit.java:70)\n        at gaia.cu9.ari.gaiaorbit.desktop.GaiaSkyDesktop.main(GaiaSkyDesktop.java:112)\njava.lang.NullPointerException\n        at gaia.cu9.ari.gaiaorbit.desktop.util.DesktopConfInit.initGlobalConf(DesktopConfInit.java:100)\n        at gaia.cu9.ari.gaiaorbit.util.ConfInit.initialize(ConfInit.java:13)\n        at gaia.cu9.ari.gaiaorbit.desktop.GaiaSkyDesktop.main(GaiaSkyDesktop.java:112)\n\n```\n\nAlso, building a Debian package with `./gradlew desktop:createDeb` creates a package that complains on installation about a missing desktop file:\n```\n# dpkg -i gaiasky-test.deb \n(Reading database ... 59256 files and directories currently installed.)\nPreparing to unpack gaiasky-test.deb ...\nUnpacking gaiasky (1.5.0.6a61035) over (1.5.0.6a61035) ...\nSetting up gaiasky (1.5.0.6a61035) ...\nchmod: cannot access ‘/opt/gaiasky/gaiasky.desktop’: No such file or directory\nmv: cannot stat ‘/opt/gaiasky/gaiasky.desktop’: No such file or directory\n```\n\nAny chance that some files are not being copied to the respective directories or archives?","files":null}]}